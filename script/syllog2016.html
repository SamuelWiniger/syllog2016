<!doctype html>
<html>
  <head>
	<title>Experiment</title>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
  	<script src="js/snap.svg-min.js"></script>
    <script src="../jspsych_new.js"></script>
  	<script src="../plugins/jspsych-text_adapted.js"></script>
  	<script src="../plugins/jspsych-instructions.js"></script>
  	<script src="../plugins/jspsych-html.js"></script>
  	<script src="../plugins/jspsych-survey.js"></script>
  	<script src="../plugins/jspsych-survey-text.js"></script>
    <script src="../plugins/jspsych-fullscreen.js"></script>
    <script src="../plugins/jspsych-button-response.js"></script>
    <script src="../plugins/jspsych-button-response-syllog.js"></script>
  	<script src="./texts.js"></script>
      <link rel="stylesheet" href="css/jquery-ui.css"></link>
      <link rel="stylesheet" href="../css/jspsych.css" type="text/css"></link>
      <meta charset="UTF-8">
    <style>
      img { width: 300px; }
    </style>
  </head>
  <body>
    <div id="jspsych-target"></div>
	<div id="demo"></div>
  </body>
  <script>

/******************************************************************************/
/**************************   Initializing  ***********************************/

var timeline = [];

var Subject_ID = jsPsych.randomization.randomID(16);
var tmpdate = (new Date());
var date = tmpdate.toUTCString();


var errStyle = 'color:red;margin-top:200px;text-align:center;font-weight:bold;';

function getPar(str,style){
    if (typeof style == 'undefined'){
      style='';
    }
    return "<div class='jspsych-display-element'><p style='"+style+"'>"+str+"</p></div>"
  }


/******************************************************************************/
/***************************   fullscreen  ************************************/

var activate_fullscreen = {
    type: 'fullscreen',
    showtext: getPar(texts.fullscreen,'margin-top:50px;'),
    buttonStyle : 'float:right;',
    buttontext: 'Start experiment',
    on_fullscreen_abort: function(){
      jsPsych.finishTrial();
      jsPsych.endExperiment(getPar(texts.fullscreen_exit,errStyle));
},
    on_hide_abort:function(){
      jsPsych.finishTrial();
      jsPsych.endExperiment(getPar(texts.visibility_exit,errStyle));
    },
    on_launch_fail: function(){
      jsPsych.finishTrial();
      jsPsych.endExperiment(getPar(texts.fullscreen_fail,errStyle));
    },
    on_hide_fail:function(){
      jsPsych.finishTrial();
      jsPsych.endExperiment(getPar(texts.visibility_fail,errStyle));
    }
}
timeline.push(activate_fullscreen);

/******************************************************************************/
/*******************   study info and consent form  ***************************/

/*Study info*/
var study_info = {
	type: 'instructions',
	show_clickable_nav: true,
	pages: [texts.study_info]
}
timeline.push(study_info);

/*function to check if all boxes are checked in consent form*/
  var check_consent = function(elem) {
    if ($('#consent_checkbox1').is(':checked') && $('#consent_checkbox2').is(':checked') && $('#consent_checkbox3').is(':checked')) {
      return true;
    } else {
      alert("You have to check all boxes if you want to participate");
      return false;
    }
    return false;
  };

/*Consent form (external html)*/
var consent_form = {
    "type": "html",
    "force_refresh": true,
    "url": "consent.html",
    "cont_btn": "start",
    "check_fn": check_consent
  }
timeline.push(consent_form);

/******************************************************************************/
/**************************   Instructions  ***********************************/

var instructions_block = {
  type: 'instructions',
  pages: [
      texts.instructions_page_one,
      texts.instructions_page_two,
      texts.instructions_page_three
  ],
  show_clickable_nav: true
}
timeline.push(instructions_block);

var example = {
  type: 'button-response',
  stimulus: '<div class = stimuli >\
            <p>All monkeys are aquinces</p>\
            <p>Some aquinces are mortal </p><hr />\
            <p>Therefore some monkeys are mortal</p></div><br><br>\
            <p class = prompt>Does this conclusion follow necessarily?</p>',
  choices: ['Yes',"I don't know",'No'],
  is_html: true
}
timeline.push(example);

var start_experiment = {
  type: 'button-response',
  stimulus:texts.start_experiment,
  choices: ['Start'],
  is_html: true,
        }
timeline.push(start_experiment);

/******************************************************************************/
/******************************   trials  *************************************/

/*Array of 40 nonsense middle terms*/
var middle_term = jsPsych.randomization.shuffle(texts.middle_term);

/*Array of  40 contents*/
var terms = jsPsych.randomization.shuffle(texts.terms);

/*Array of 40 random [1,0][0,1]-pairs to determine the believability later on*/
var belief = [];
var beliefFirst = null;
var beliefSecond = null;

for (var i = 0; i < 40; i++){
  var beliefFirst = Math.floor((Math.random()*2));
  if (beliefFirst == 1) {beliefSecond = 0;}
  else beliefSecond = 1;
  belief[i] = [beliefFirst,beliefSecond];
  var beliefFirst = null;
  var beliefSecond = null;
}

/*Stimuli with random contents and believability*/
var stimuli = [

{stimulus: /*syllogism: EI2_O1 , valid: yes*/
  '<div class = stimuli >\
  <p>No '+ terms[0][belief[0][0]] + ' are ' + middle_term[0] +'</p>\
  <p>Some '+ terms[0][belief[0][1]] +' are '+ middle_term[0] +'</p><hr />\
  <p>Therefore some '+ terms[0][belief[0][1]] +' are not '+terms[0][belief[0][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[0][0] ,
  data: { Stimulus: 'EI2_O1_1' , Figure: 2 , Validity: 'valid' , DirectionOfConclusion: 'forward', Subject: terms[0][belief[0][1]] , Predicate: terms[0][belief[0][0]] , Middle: middle_term[0]}
  },
{stimulus: /*syllogism: EI2_O1 , valid: yes*/
  '<div class = stimuli >\
  <p>No '+ terms[1][belief[1][0]] +' are '+ middle_term[1] +'</p>\
  <p>Some '+ terms[1][belief[1][1]] +' are '+ middle_term[1] +'</p><hr />\
  <p>Therefore some '+ terms[1][belief[1][1]] +' are not '+terms[1][belief[1][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[1][0] ,
  data: { Stimulus: 'EI2_O1_2', Figure: 2 , Validity: 'valid' , DirectionOfConclusion: 'forward', Subject: terms[1][belief[1][1]] , Predicate: terms[1][belief[1][0]] , Middle: middle_term[1]}
  },
{stimulus: /*syllogism: EI3_O1 valid: yes*/
  '<div class = stimuli >\
  <p>No '+ middle_term[2] +' are '+ terms[2][belief[2][0]] +'</p>\
  <p>Some '+ middle_term[2] +' are '+ terms[2][belief[2][1]] +'</p><hr />\
  <p>Therefore some '+ terms[2][belief[2][1]] +' are not '+terms[2][belief[2][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[2][0],
  data: { Stimulus: 'EI3_O1_1', Figure: 3 , Validity: 'valid', DirectionOfConclusion: 'forward', Subject: terms[2][belief[2][1]] , Predicate: terms[2][belief[2][0]] , Middle: middle_term[2]}
  },
{stimulus: /*syllogism: EI3_O1 valid: yes*/
  '<div class = stimuli >\
  <p>No '+ middle_term[3] +' are '+ terms[3][belief[3][0]] +'</p>\
  <p>Some '+ middle_term[3] +' are '+ terms[3][belief[3][1]] +'</p><hr />\
  <p>Therefore some '+ terms[3][belief[3][1]] +' are not '+terms[3][belief[3][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[3][0],
  data: { Stimulus: 'EI3_O1_2', Figure: 3 , Validity: 'valid', DirectionOfConclusion: 'forward', Subject: terms[3][belief[3][1]] , Predicate: terms[3][belief[3][0]] , Middle: middle_term[3]}
  },
{stimulus: /*syllogism: EI4_O1 valid: yes*/
  '<div class = stimuli >\
  <p>No '+ terms[4][belief[4][0]] +' are '+ middle_term[4] +'</p>\
  <p>Some '+ middle_term[4] +' are '+ terms[4][belief[4][1]] +'</p><hr />\
  <p>Therefore some '+ terms[4][belief[4][1]] +' are not '+terms[4][belief[4][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[4][0],
  data: { Stimulus: 'EI4_O1_1', Figure: 4 , Validity: 'valid', DirectionOfConclusion: 'forward', Subject: terms[4][belief[4][1]] , Predicate: terms[4][belief[4][0]] , Middle: middle_term[4]}
  },
{stimulus: /*syllogism: EI4_O1 valid: yes*/
  '<div class = stimuli >\
  <p>No '+ terms[5][belief[5][0]] +' are '+ middle_term[5] +'</p>\
  <p>Some '+ middle_term[5] +' are '+ terms[5][belief[5][1]] +'</p><hr />\
  <p>Therefore some '+ terms[5][belief[5][1]] +' are not '+terms[5][belief[5][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[5][0],
  data: { Stimulus: 'EI4_O1_2', Figure: 4 , Validity: 'valid', DirectionOfConclusion: 'forward', Subject: terms[5][belief[5][1]] , Predicate: terms[5][belief[5][0]] , Middle: middle_term[5]}
  },
{stimulus: /*syllogism: IE4_O2 valid: yes*/
  '<div class = stimuli >\
  <p>Some '+ terms[6][belief[6][0]]  +' are '+ middle_term[6] +'</p>\
  <p>No '+ middle_term[6] +' are '+ terms[6][belief[6][1]]  +'</p><hr />\
  <p>Therefore some '+ terms[6][belief[6][0]] +' are not '+terms[6][belief[6][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[6][1],
  data: { Stimulus: 'IE4_O2_1', Figure: 4 , Validity: 'valid', DirectionOfConclusion: 'backward', Subject: terms[6][belief[6][0]] , Predicate: terms[6][belief[6][1]] , Middle: middle_term[6]}
  },
{stimulus: /*syllogism: IE4_O2 valid: yes*/
  '<div class = stimuli >\
  <p>Some '+ terms[7][belief[7][0]] +' are '+ middle_term[7] +'</p>\
  <p>No '+ terms[7][belief[7][1]] +' are '+ middle_term[7] +'</p><hr />\
  <p>Therefore some '+ terms[7][belief[7][0]] +' are not '+terms[7][belief[7][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[7][1],
  data: { Stimulus: 'IE4_O2_2', Figure: 4 , Validity: 'valid', DirectionOfConclusion: 'backward', Subject: terms[7][belief[7][0]] , Predicate: terms[7][belief[7][1]] , Middle: middle_term[7]}
  },
{stimulus: /*syllogism: IE2_O2 valid: yes*/
  '<div class = stimuli >\
  <p>Some '+ terms[8][belief[8][0]] +' are '+ middle_term[8] +'</p>\
  <p>No '+ terms[8][belief[8][1]] +' are '+ middle_term[8] +'</p><hr />\
  <p>Therefore some '+ terms[8][belief[8][0]] +' are not '+terms[8][belief[8][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[8][1],
  data: { Stimulus: 'IE2_O2_1', Figure: 2 , Validity: 'valid', DirectionOfConclusion: 'backward', Subject: terms[8][belief[8][0]] , Predicate: terms[8][belief[8][1]] , Middle: middle_term[8]}
  },
{stimulus: /*syllogism: IE2_O2 valid: yes*/
  '<div class = stimuli >\
  <p>Some '+ terms[9][belief[9][0]] +' are '+ middle_term[9] +'</p>\
  <p>No '+ terms[9][belief[9][1]] +' are '+ middle_term[9] +'</p><hr />\
  <p>Therefore some '+ terms[9][belief[9][0]] +' are not '+terms[9][belief[9][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[9][1],
  data: { Stimulus: 'IE2_O2_2', Figure: 2 , Validity: 'valid', DirectionOfConclusion: 'backward', Subject: terms[9][belief[9][0]] , Predicate: terms[9][belief[9][1]] , Middle: middle_term[9]}
  },
{stimulus: /*syllogism: EI2_O2 valid: no*/
  '<div class = stimuli >\
  <p>No '+ terms[10][belief[10][0]] +' are '+ middle_term[10] +'</p>\
  <p>Some '+ terms[10][belief[10][1]] +' are '+ middle_term[10] +'</p><hr />\
  <p>Therefore some '+ terms[10][belief[10][0]] +' are not '+terms[10][belief[10][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[10][1],
  data: { Stimulus: 'EI2_O2_1', Figure: 2 , Validity: 'invalid', DirectionOfConclusion: 'backward', Subject: terms[10][belief[10][0]] , Predicate: terms[10][belief[10][1]] , Middle: middle_term[10]}
  },
{stimulus: /*syllogism: EI2_O2 valid: no*/
  '<div class = stimuli >\
  <p>No '+ terms[11][belief[11][0]] +' are '+ middle_term[11] +'</p>\
  <p>Some '+ terms[11][belief[11][1]] +' are '+ middle_term[11] +'</p><hr />\
  <p>Therefore some '+ terms[11][belief[11][0]] +' are not '+terms[11][belief[11][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[11][1],
  data: { Stimulus: 'EI2_O2_2', Figure: 2 , Validity: 'invalid', DirectionOfConclusion: 'backward', Subject: terms[11][belief[11][0]] , Predicate: terms[11][belief[11][1]] , Middle: middle_term[11]}
  },
{stimulus: /*syllogism: EI3_O2 valid: no*/
  '<div class = stimuli >\
  <p>No '+ middle_term[12] +' are '+ terms[12][belief[12][0]] +'</p>\
  <p>Some '+ middle_term[12] +' are '+ terms[12][belief[12][1]] +'</p><hr />\
  <p>Therefore some '+ terms[12][belief[12][0]] +' are not '+terms[12][belief[12][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[12][1],
  data: { Stimulus: 'EI3_O2_1', Figure: 3 , Validity: 'invalid', DirectionOfConclusion: 'backward', Subject: terms[12][belief[12][0]] , Predicate: terms[12][belief[12][1]] , Middle: middle_term[12]}
  },
{stimulus: /*syllogism: EI3_O2 valid: no*/
  '<div class = stimuli >\
  <p>No '+ middle_term[13] +' are '+ terms[13][belief[13][0]] +'</p>\
  <p>Some '+ middle_term[13] +' are '+ terms[13][belief[13][1]] +'</p><hr />\
  <p>Therefore some '+ terms[13][belief[13][0]] +' are not '+terms[13][belief[13][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[13][1],
  data: { Stimulus: 'EI3_O2_2', Figure: 3 , Validity: 'invalid', DirectionOfConclusion: 'backward', Subject: terms[13][belief[13][0]] , Predicate: terms[13][belief[13][1]] , Middle: middle_term[13]}
  },
{stimulus: /*syllogism: EI4_O2 valid: no*/
  '<div class = stimuli >\
  <p>No '+ terms[14][belief[14][0]] +' are '+ middle_term[14] +'</p>\
  <p>Some '+ middle_term[14] +' are '+ terms[14][belief[14][1]] +'</p><hr />\
  <p>Therefore some '+ terms[14][belief[14][0]] +' are not '+terms[14][belief[14][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[14][1],
  data: { Stimulus: 'EI4_O2_1', Figure: 4 , Validity: 'invalid', DirectionOfConclusion: 'backward', Subject: terms[14][belief[14][0]] , Predicate: terms[14][belief[14][1]] , Middle: middle_term[14]}
  },
{stimulus: /*syllogism: EI4_O2 valid: no*/
  '<div class = stimuli >\
  <p>No '+ terms[15][belief[15][0]] +' are '+ middle_term[15] +'</p>\
  <p>Some '+ middle_term[15] +' are '+ terms[15][belief[15][1]] +'</p><hr />\
  <p>Therefore some '+ terms[15][belief[15][0]] +' are not '+terms[15][belief[15][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[15][1],
  data: { Stimulus: 'EI4_O2_2', Figure: 4 , Validity: 'invalid', DirectionOfConclusion: 'backward', Subject: terms[15][belief[15][0]] , Predicate: terms[15][belief[15][1]] , Middle: middle_term[15]}
  },
{stimulus: /*syllogism: IE4_O1 valid: no*/
  '<div class = stimuli >\
  <p>Some '+ terms[16][belief[16][0]] +' are '+ middle_term[16] +'</p>\
  <p>No '+ middle_term[16] +' are '+ terms[16][belief[16][1]] +'</p><hr />\
  <p>Therefore some '+ terms[16][belief[16][1]] +' are not '+terms[16][belief[16][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[16][0],
  data: { Stimulus: 'IE4_O1_1', Figure: 4 , Validity: 'invalid', DirectionOfConclusion: 'forward', Subject: terms[16][belief[16][1]] , Predicate: terms[16][belief[16][0]] , Middle: middle_term[16]}
  },
{stimulus: /*syllogism: IE4_O1 valid: no*/
  '<div class = stimuli >\
  <p>Some '+ terms[17][belief[17][0]] +' are '+ middle_term[17] +'</p>\
  <p>No '+ middle_term[17] +' are '+ terms[17][belief[17][1]] +'</p><hr />\
  <p>Therefore some '+ terms[17][belief[17][1]] +' are not '+terms[17][belief[17][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[17][0],
  data: { Stimulus: 'IE4_O1_2', Figure: 4 , Validity: 'invalid', DirectionOfConclusion: 'forward', Subject: terms[17][belief[17][1]] , Predicate: terms[17][belief[17][0]] , Middle: middle_term[17]}
  },
{stimulus: /*syllogism: IE2_O1 valid: no*/
  '<div class = stimuli >\
  <p>Some '+ terms[18][belief[18][0]] +' are '+ middle_term[18] +'</p>\
  <p>No '+ terms[18][belief[18][1]] +' are '+ middle_term[18] +'</p><hr />\
  <p>Therefore some '+ terms[18][belief[18][1]] +' are not '+terms[18][belief[18][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[18][0],
  data: { Stimulus: 'IE2_O1_1', Figure: 2 , Validity: 'invalid', DirectionOfConclusion: 'forward', Subject: terms[18][belief[18][1]] , Predicate: terms[18][belief[18][0]] , Middle: middle_term[18]}
  },
{stimulus: /*syllogism: IE2_O1 valid: no*/
  '<div class = stimuli >\
  <p>Some '+ terms[19][belief[19][0]] +' are '+ middle_term[19] +'</p>\
  <p>No '+ terms[19][belief[19][1]] +' are '+ middle_term[19] +'</p><hr />\
  <p>Therefore some '+ terms[19][belief[19][1]] +' are not '+terms[19][belief[19][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[19][0],
  data: { Stimulus: 'IE2_O1_2', Figure: 2 , Validity: 'invalid', DirectionOfConclusion: 'forward', Subject: terms[19][belief[19][1]] , Predicate: terms[19][belief[19][0]] , Middle: middle_term[19]}
  },
{stimulus: /*syllogism: OA2_O2 valid: yes*/
  '<div class = stimuli >\
  <p>Some '+ terms[20][belief[20][0]] +' are not '+ middle_term[20] +'</p>\
  <p>All '+ terms[20][belief[20][1]] +' are '+ middle_term[20] +'</p><hr />\
  <p>Therefore some '+ terms[20][belief[20][0]] +' are not '+terms[20][belief[20][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[20][1],
  data: { Stimulus: 'OA2_O2_1', Figure: 2 , Validity: 'valid', DirectionOfConclusion: 'backward', Subject: terms[20][belief[20][0]] , Predicate: terms[20][belief[20][1]] , Middle: middle_term[20]}
  },
{stimulus: /*syllogism: OA2_O2 valid: yes*/
  '<div class = stimuli >\
  <p>Some '+ terms[21][belief[21][0]] +' are not '+ middle_term[21] +'</p>\
  <p>All '+ terms[21][belief[21][1]] +' are '+ middle_term[21] +'</p><hr />\
  <p>Therefore some '+ terms[21][belief[21][0]] +' are not '+terms[21][belief[21][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[21][1],
  data: { Stimulus: 'OA2_O2_2', Figure: 2 , Validity: 'valid', DirectionOfConclusion: 'backward', Subject: terms[21][belief[21][0]] , Predicate: terms[21][belief[21][1]] , Middle: middle_term[21]}
  },
{stimulus: /*syllogism: AO2_O1 valid: yes*/
  '<div class = stimuli >\
  <p>All '+ terms[22][belief[22][0]] +' are '+ middle_term[22] +'</p>\
  <p>Some '+ terms[22][belief[22][1]] +' are not '+ middle_term[22] +'</p><hr />\
  <p>Therefore some '+ terms[22][belief[22][1]] +' are not '+terms[22][belief[22][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[22][0],
  data: { Stimulus: 'AO2_O1_1', Figure: 2 , Validity: 'valid', DirectionOfConclusion: 'forward', Subject: terms[22][belief[22][1]] , Predicate: terms[22][belief[22][0]] , Middle: middle_term[22]}
  },
{stimulus: /*syllogism: AO2_O1 valid: yes*/
  '<div class = stimuli >\
  <p>All '+ terms[23][belief[23][0]] +' are '+ middle_term[23] +'</p>\
  <p>Some '+ terms[23][belief[23][1]] +' are not '+ middle_term[23] +'</p><hr />\
  <p>Therefore some '+ terms[23][belief[23][1]] +' are not '+terms[23][belief[23][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[23][0],
  data: { Stimulus: 'AO2_O1_2', Figure: 2 , Validity: 'valid', DirectionOfConclusion: 'forward', Subject: terms[23][belief[23][1]] , Predicate: terms[23][belief[23][0]] , Middle: middle_term[23]}
  },
{stimulus: /*syllogism: OA3_O1 valid: yes*/
  '<div class = stimuli >\
  <p>Some '+ middle_term[24] +' are not '+ terms[24][belief[24][0]] +'</p>\
  <p>All '+ middle_term[24] +' are '+ terms[24][belief[24][1]] +'</p><hr />\
  <p>Therefore some '+ terms[24][belief[24][1]] +' are not '+terms[24][belief[24][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[24][0],
  data: { Stimulus: 'OA3_O1_1', Figure: 3 , Validity: 'valid', DirectionOfConclusion: 'forward', Subject: terms[24][belief[24][1]] , Predicate: terms[24][belief[24][0]] , Middle: middle_term[24]}
  },
{stimulus: /*syllogism: OA3_O1 valid: yes*/
  '<div class = stimuli >\
  <p>Some '+ middle_term[25] +' are not '+ terms[25][belief[25][0]] +'</p>\
  <p>All '+ middle_term[25] +' are '+ terms[25][belief[25][1]] +'</p><hr />\
  <p>Therefore some '+ terms[25][belief[25][1]] +' are not '+terms[25][belief[25][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[25][0],
  data: { Stimulus: 'OA3_O1_2', Figure: 3 , Validity: 'valid', DirectionOfConclusion: 'forward', Subject: terms[25][belief[25][1]] , Predicate: terms[25][belief[25][0]] , Middle: middle_term[25]}
  },
{stimulus: /*syllogism: AO3_O2 valid: yes*/
  '<div class = stimuli >\
  <p>All '+ middle_term[26] +' are '+ terms[26][belief[26][0]] +'</p>\
  <p>Some '+ middle_term[26] +' are not '+ terms[26][belief[26][1]] +'</p><hr />\
  <p>Therefore some '+ terms[26][belief[26][0]] +' are not '+terms[26][belief[26][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[26][1],
  data: { Stimulus: 'AO3_O2_1', Figure: 3 , Validity: 'valid', DirectionOfConclusion: 'backward', Subject: terms[26][belief[26][0]] , Predicate: terms[26][belief[26][1]] , Middle: middle_term[26]}
  },
{stimulus: /*syllogism: AO3_O2 valid: yes*/
  '<div class = stimuli >\
  <p>All '+ middle_term[27] +' are '+ terms[27][belief[27][0]] +'</p>\
  <p>Some '+ middle_term[27] +' are not '+ terms[27][belief[27][1]] +'</p><hr />\
  <p>Therefore some '+ terms[27][belief[27][0]] +' are not '+terms[27][belief[27][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[27][1],
  data: { Stimulus: 'AO3_O2_2', Figure: 3 , Validity: 'valid', DirectionOfConclusion: 'backward', Subject: terms[27][belief[27][0]] , Predicate: terms[27][belief[27][1]] , Middle: middle_term[27]}
  },
{stimulus: /*syllogism: OE2_O2 valid: no*/
  '<div class = stimuli >\
  <p>Some '+ terms[28][belief[28][0]] +' are not '+ middle_term[28] +'</p>\
  <p>No '+ terms[28][belief[28][1]] +' are '+ middle_term[28] +'</p><hr />\
  <p>Therefore some '+ terms[28][belief[28][0]] +' are not '+terms[28][belief[28][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[28][1],
  data: { Stimulus: 'OE2_O2_1', Figure: 2 , Validity: 'invalid', DirectionOfConclusion: 'backward', Subject: terms[28][belief[28][0]] , Predicate: terms[28][belief[28][1]] , Middle: middle_term[28]}
  },
{stimulus: /*syllogism: OE2_O2 valid: no*/
  '<div class = stimuli >\
  <p>Some '+ terms[29][belief[29][0]] +' are not '+ middle_term[29] +'</p>\
  <p>No '+ terms[29][belief[29][1]] +' are '+ middle_term[29] +'</p><hr />\
  <p>Therefore some '+ terms[29][belief[29][0]] +' are not '+terms[29][belief[29][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[29][1],
  data: { Stimulus: 'OE2_O2_2', Figure: 2 , Validity: 'invalid', DirectionOfConclusion: 'backward', Subject: terms[29][belief[29][0]] , Predicate: terms[29][belief[29][1]] , Middle: middle_term[29]}
  },
{stimulus: /*syllogism: EO2_O1 valid: no*/
  '<div class = stimuli >\
  <p>No '+ terms[30][belief[30][0]] +' are '+ middle_term[30] +'</p>\
  <p>Some '+ terms[30][belief[30][1]] +' are not '+ middle_term[30] +'</p><hr />\
  <p>Therefore some '+ terms[30][belief[30][1]] +' are not '+terms[30][belief[30][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[30][0],
  data: { Stimulus: 'EO2_O1_1', Figure: 2 , Validity: 'invalid', DirectionOfConclusion: 'forward', Subject: terms[30][belief[30][1]] , Predicate: terms[30][belief[30][0]] , Middle: middle_term[30]}
  },
{stimulus: /*syllogism: EO2_O1 valid: no*/
  '<div class = stimuli >\
  <p>No '+ terms[31][belief[31][0]] +' are '+ middle_term[31] +'</p>\
  <p>Some '+ terms[31][belief[31][1]] +' are not '+ middle_term[31] +'</p><hr />\
  <p>Therefore some '+ terms[31][belief[31][1]] +' are not '+terms[31][belief[31][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[31][0],
  data: { Stimulus: 'EO2_O1_2', Figure: 2 , Validity: 'invalid', DirectionOfConclusion: 'forward', Subject: terms[31][belief[31][1]] , Predicate: terms[31][belief[31][0]] , Middle: middle_term[31]}
  },
{stimulus: /*syllogism: OE3_O1 valid: no*/
  '<div class = stimuli >\
  <p>Some '+ middle_term[32] +' are not '+ terms[32][belief[32][0]] +'</p>\
  <p>No '+ middle_term[32] +' are '+ terms[32][belief[32][1]] +'</p><hr />\
  <p>Therefore some '+ terms[32][belief[32][1]] +' are not '+terms[32][belief[32][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[32][0],
  data: { Stimulus: 'OE3_O1_1', Figure: 3 , Validity: 'invalid', DirectionOfConclusion: 'forward', Subject: terms[32][belief[32][1]] , Predicate: terms[32][belief[32][0]] , Middle: middle_term[32]}
  },
{stimulus: /*syllogism: OE3_O1 valid: no*/
  '<div class = stimuli >\
  <p>Some '+ middle_term[33] +' are not '+ terms[33][belief[33][0]] +'</p>\
  <p>No '+ middle_term[33] +' are '+ terms[33][belief[33][1]] +'</p><hr />\
  <p>Therefore some '+ terms[33][belief[33][1]] +' are not '+terms[33][belief[33][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[33][0],
  data: { Stimulus: 'OE3_O1_2', Figure: 3 , Validity: 'invalid', DirectionOfConclusion: 'forward', Subject: terms[33][belief[33][1]] , Predicate: terms[33][belief[33][0]] , Middle: middle_term[33]}
  },
{stimulus: /*syllogism: EO3_O2 valid: no*/
  '<div class = stimuli >\
  <p>No '+ middle_term[34] +' are '+ terms[34][belief[34][0]] +'</p>\
  <p>Some '+ middle_term[34] +' are not '+ terms[34][belief[34][1]] +'</p><hr />\
  <p>Therefore some '+ terms[34][belief[34][0]] +' are not '+terms[34][belief[34][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[34][1],
  data: { Stimulus: 'EO3_O2_1', Figure: 3 , Validity: 'invalid', DirectionOfConclusion: 'backward', Subject: terms[34][belief[34][0]] , Predicate: terms[34][belief[34][1]] , Middle: middle_term[34]}
  },
{stimulus: /*syllogism: EO3_O2 valid: no*/
  '<div class = stimuli >\
  <p>No '+ middle_term[35] +' are '+ terms[35][belief[35][0]] +'</p>\
  <p>Some '+ middle_term[35] +' are not '+ terms[35][belief[35][1]] +'</p><hr />\
  <p>Therefore some '+ terms[35][belief[35][0]] +' are not '+terms[35][belief[35][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[35][1],
  data: { Stimulus: 'EO3_O2_2', Figure: 3 , Validity: 'invalid', DirectionOfConclusion: 'backward', Subject: terms[35][belief[35][0]] , Predicate: terms[35][belief[35][1]] , Middle: middle_term[35]}
  },
{stimulus: /*syllogism: OA4_O2 valid: no*/
  '<div class = stimuli >\
  <p>Some '+ terms[36][belief[36][0]] +' are not '+ middle_term[36] +'</p>\
  <p>All '+ middle_term[36] +' are '+ terms[36][belief[36][1]] +'</p><hr />\
  <p>Therefore some '+ terms[36][belief[36][0]] +' are not '+terms[36][belief[36][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[36][1],
  data: { Stimulus: 'OA4_O2_1', Figure: 4 , Validity: 'invalid', DirectionOfConclusion: 'backward', Subject: terms[36][belief[36][0]] , Predicate: terms[36][belief[36][1]] , Middle: middle_term[36]}
  },
{stimulus: /*syllogism: OA4_O2 valid: no*/
  '<div class = stimuli >\
  <p>Some '+ terms[37][belief[37][0]] +' are not '+ middle_term[37] +'</p>\
  <p>All '+ middle_term[37] +' are '+ terms[37][belief[37][1]] +'</p><hr />\
  <p>Therefore some '+ terms[37][belief[37][0]] +' are not '+terms[37][belief[37][1]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[37][1],
  data: { Stimulus: 'OA4_O2_2', Figure: 4 , Validity: 'invalid', DirectionOfConclusion: 'backward', Subject: terms[37][belief[37][0]] , Predicate: terms[37][belief[37][1]] , Middle: middle_term[37]}
  },
{stimulus: /*syllogism: AO1_O1 valid: no*/
  '<div class = stimuli >\
  <p>All '+ middle_term[38] +' are '+ terms[38][belief[38][0]] +'</p>\
  <p>Some '+ terms[38][belief[38][1]] +' are not '+ middle_term[38] +'</p><hr />\
  <p>Therefore some '+ terms[38][belief[38][1]] +' are not '+terms[38][belief[38][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[38][0],
  data: { Stimulus: 'AO1_O1_1', Figure: 1 , Validity: 'invalid', DirectionOfConclusion: 'forward', Subject: terms[38][belief[38][1]] , Predicate: terms[38][belief[38][0]] , Middle: middle_term[38]}
  },
{stimulus: /*syllogism: AO1_O1 valid: no*/
  '<div class = stimuli >\
  <p>All '+ middle_term[39] +' are '+ terms[39][belief[39][0]] +'</p>\
  <p>Some '+ terms[39][belief[39][1]] +' are not '+ middle_term[39] +'</p><hr />\
  <p>Therefore some '+ terms[39][belief[39][1]] +' are not '+terms[39][belief[39][0]] +'</p>\
  </div><br><br><p class = prompt>Does this conclusion follow necessarily?</p>',
  believability: belief[39][0],
  data: { Stimulus: 'AO1_O1_2', Figure: 1 , Validity: 'invalid', DirectionOfConclusion: 'forward', Subject: terms[39][belief[39][1]] , Predicate: terms[39][belief[39][0]] , Middle: middle_term[39]}
  }
    ];

/*Shuffle the stimulus array */
var rand_stimuli = jsPsych.randomization.shuffle(stimuli);
/*Take the first 16 and put them in a new array*/
var rand_stimuli_first_16 = rand_stimuli.slice(0,16);
/*Take the second 16 and put them in a new array*/
var rand_stimuli_second_16 = rand_stimuli.slice(16,32);
/*The remaining 8 Stimuli will not be used*/


var first_block = {
  type: 'button-response-syllog',
  choices: ['Yes',"I don't know",'No'],
  is_html: true,
  timeline: rand_stimuli_first_16
    }
timeline.push(first_block);

var break_block = {
  type: 'button-response',
  stimulus:texts.break,
  choices: ['Continue'],
  is_html: true,
        }
timeline.push(break_block);

var second_block = {
  type: 'button-response-syllog',
  choices: ['Yes',"I don't know",'No'],
  is_html: true,
  timeline: rand_stimuli_second_16
    }
timeline.push(second_block);

/******************************************************************************/
/*****************************   survey  **************************************/

  var end_fullscreen = {
          type: 'fullscreen',
          showtext: getPar(texts.end_fullscreen,'margin-top:150px;'),
          buttonStyle : 'float:right;',
          buttontext: "Proceed to survey",
          exit: true
      }
timeline.push(end_fullscreen);

var q1 = [
	"What is your age?",
	"What is your gender?",
	"What is your employment status?",
  "What is the highest degree or level of education you have completed?"];
var q2 =["Do you have any training in formal logic (e.g., taken a course)?",
	"Do you have programming excperience in more than one programming language?",
//  "Please rate your math skills on the scale from 1 to 10 (1 = elementary school level; 10 = PhD in math or equivalent).", //Radio button
	"Did you solve all the taks conscientiously? Did you seriously attempt to solve all problems? (This question has no influence on your reward.)"];//ask Peter which is better.
var q3 = ["If you want to leave any comments, please write them below:"];
var opt1 = ["Male", "Female", "Other / No answer"];
var opt2 = ["Working", "Student", "Seeking work", "Other"];
var opt3 = ["Less than high school","High school graduate", "Some higher education, no degree", "Higher education (e.g., bachelor's degree, associate degree)", "Post graduate degree (e.g., master's degree, doctorate degree)",];
var opt4 = ["Yes", "No"]
var opt5 = ["Yes", "No",];
var opt6 = ["Yes (my data can be used).", "No (better not use my data)."];

var survey_p1 = {
	type: 'survey',
	questions: q1,
	options: ["0", opt1, opt2, opt3],
	required: [true, true, true, true]
};
timeline.push(survey_p1);

var survey_p2 = {
	type: 'survey',
	questions: q2,
	options: [opt4, opt5, "0", opt6],
	required: [true, true, false, true]
};
timeline.push(survey_p2);

var survey_p3 = {
	type: 'survey-text',
	questions: q3,
	rows: [5],
	columns: [90],
	preamble: getPar(texts.save),
	on_finish: function(data){
				var csvString = jsPsych.data.dataAsCSV();
				var jsonString = jsPsych.data.dataAsJSON();
				saveData(Subject_ID, csvString, jsonString)
			}
};
timeline.push(survey_p3);

/******************************************************************************/
/**************************   Data saving  ************************************/

/*Add date and ID to data*/
jsPsych.data.addProperties({
  date: date,
  ID: Subject_ID
  });

/*Add IP address to data*/
$.getJSON('//api.ipify.org?format=json', function(data) {
  var tempIP = JSON.stringify(data, null, 0);
  jsPsych.data.addProperties({
    IP: tempIP
  	});
});

 var debriefing_block = {
        type: 'text',
        text: getPar(texts.debriefing,'margin-top:100px'),
        cont_key: [114]
      };
timeline.push(debriefing_block);

function saveData(subjectID, CSV, JSON){
       $.ajax({
          type: 'post',
          cache: false,
          url: '../store.php',
          data: {subjectID: Subject_ID, folder: "syllog2016data", csvStrings: CSV, dataAsJSON: JSON}
       });
      }

var csvString = jsPsych.data.dataAsCSV();

/* */
  jsPsych.init({
    display_element: $('#jspsych-target'),
    timeline: timeline,
	  default_iti: 100,
    on_finish: function(data){ saveData()}
  });
  </script>
</html>
